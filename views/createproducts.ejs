<%- include('./partials/header') %>

  <% if (success && success.length> 0) { %>
    <div
      class="fixed top-5 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-2 rounded-md shadow-lg z-50">
      <%= success %>
    </div>
    <% } %>

      <div class="min-h-screen bg-gray-50 px-6 py-12">
        <div class="max-w-2xl mx-auto bg-white rounded-xl shadow-md p-8">
          <h2 class="text-2xl font-bold mb-6 text-center text-blue-600">üõçÔ∏è Add New Product</h2>

          <form action="/admin/create" method="POST" enctype="multipart/form-data" class="space-y-10">
            <!-- üßæ Product Details -->
            <div>
              <h3 class="text-xl font-semibold mb-4">üì¶ Product Information</h3>
              <div class="grid md:grid-cols-2 gap-5">
                <div>
                  <label class="block mb-1 font-medium">Product Name</label>
                  <input name="name" type="text" required placeholder="Eg: Leather Sling Bag"
                    class="w-full border px-4 py-2 rounded focus:outline-none" />
                </div>

                <div>
                  <label class="block mb-1 font-medium">Product Images</label>
                  <input name="images" type="file" accept="image/*" multiple class="border rounded px-3 py-2 w-full">

                
                  <p class="text-xs text-gray-500 mt-1">You can select multiple images</p>
                </div>

                <div>
                  <label class="block mb-1 font-medium">Original Price (MRP ‚Çπ)</label>
                  <input id="originalPrice" name="originalPrice" type="number" required placeholder="Eg: 4999"
                    class="w-full border px-4 py-2 rounded" oninput="calculateDiscount()" />
                </div>

                <div>
                  <label class="block mb-1 font-medium">Discount (‚Çπ)</label>
                  <input id="discount" name="discount" type="number" placeholder="Eg: 1000"
                    class="w-full border px-4 py-2 rounded" oninput="calculateDiscount()" />
                </div>

                <div>
                  <label class="block mb-1 font-medium">Or Discount (%)</label>
                  <input id="discountPercent" type="number" placeholder="Eg: 30" class="w-full border px-4 py-2 rounded"
                    oninput="calculateFromPercent()" />
                </div>

                <div>
                  <label class="block mb-1 font-medium">Final Price (‚Çπ)</label>
                  <input id="finalPrice" name="price" type="number" readonly
                    class="w-full border px-4 py-2 rounded bg-gray-100 text-gray-600 cursor-not-allowed" />
                </div>
              </div>

              <!-- üí° Live Preview -->
              <div class="mt-4 text-center text-sm text-gray-700 italic" id="priceSummary"></div>
            </div>

            <!-- üé® Styling Options -->
            <div>
              <h3 class="text-xl font-semibold mb-4">üé® Card Styling</h3>
              <div class="grid md:grid-cols-3 gap-5">
                <div>
                  <label class="block mb-1 font-medium">Gradient BG Color</label>
                  <input name="bgcolor" type="text" placeholder="#fcd34d or bg-yellow-400"
                    class="w-full border px-4 py-2 rounded" />
                </div>
                <div>
                  <label class="block mb-1 font-medium">Panel BG Color</label>
                  <input name="panelcolor" type="text" placeholder="#ffffff" class="w-full border px-4 py-2 rounded" />
                </div>
                <div>
                  <label class="block mb-1 font-medium">Text Color</label>
                  <input name="textcolor" type="text" placeholder="#111827" class="w-full border px-4 py-2 rounded" />
                </div>
              </div>
            </div>

            <!-- ‚úÖ Submit -->
            <div class="text-center">
              <button type="submit"
                class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-full font-semibold transition">
                ‚ûï Add Product
              </button>
            </div>
          </form>
        </div>
      </div>

      <script>
        function calculateDiscount() {
          const original = parseFloat(document.getElementById("originalPrice").value) || 0;
          const discount = parseFloat(document.getElementById("discount").value) || 0;
          const final = Math.max(original - discount, 1);
          const percent = original > 0 ? Math.round((discount / original) * 100) : 0;

          document.getElementById("finalPrice").value = final;
          document.getElementById("discountPercent").value = percent;
          document.getElementById("priceSummary").textContent =
            discount > 0
              ? `Final Price: ‚Çπ${final} ‚Äî You save ‚Çπ${discount} (${percent}% off)`
              : "";
        }

        function calculateFromPercent() {
          const original = parseFloat(document.getElementById("originalPrice").value) || 0;
          const percent = parseFloat(document.getElementById("discountPercent").value) || 0;
          const discount = Math.round((percent / 100) * original);
          const final = Math.max(original - discount, 1);

          document.getElementById("discount").value = discount;
          document.getElementById("finalPrice").value = final;
          document.getElementById("priceSummary").textContent =
            discount > 0
              ? `Final Price: ‚Çπ${final} ‚Äî You save ‚Çπ${discount} (${percent}% off)`
              : "";
        }
      </script>

      <%- include('./partials/footer') %>